<!DOCTYPE html>
<html>
<head>
	<title>Geolocation Test</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<style type="text/css">
		*{
			box-sizing: border-box;
		}
		.container{
			width: 100%;
			padding: 15px;
		}
		.header{
			width: 100%;
			text-align: center;
			margin-bottom: 15px;
		}
		.content{
			text-align: center;
		}
		.data-box{
			background-color: #CCC;
			margin: 0 auto;
			padding: 15px;
			text-align: center;
		}

	</style>
</head>
<body>
	<div class="container">

		<div class="header">
			<h1>Location Data</h1>
		</div>

		<div class="content">
			<div class="data-box"><p>No Location Info</p></div>
		</div>
	</div>
	<script>

		var locationData = [
			{
				"label": "Work",
				"nw": {
					"lat": 42.915764,
					"lon": -85.522509
				},
				"se": {
					"lat": 42.911099,
					"lon": -85.513361
				}
			},
			{
				"label": "131",
				"nw": {
					"lat": 42.915591,
					"lon": -85.687446
				},
				"se": {
					"lat": 42.911666,
					"lon": -85.668563
				}
			},
			{
				"label": "Home",
				"nw": {
					"lat": 42.919194,
					"lon": -85.722863
				},
				"se": {
					"lat": 42.918432,
					"lon": -85.721900
				}
			}
		];

		var display = $('.data-box');
		setInterval(function(){ getLocation(); }, 3000);

		function getLocation() {
		    if (navigator.geolocation) {
		        navigator.geolocation.getCurrentPosition(showPosition, showError);
		    } else {
		        display.html("<p>Geolocation is not supported by this browser.</p>");
		    }
		}

		function showPosition(position) {
			var coords = position.coords.latitude + ", " + position.coords.longitude;
			var lat = parseFloat(position.coords.latitude);
			var lon = parseFloat(position.coords.longitude);
			var displayText = false;

			for (var i = 0; i <= locationData.length-1; i++) {

				if (lat < locationData[i].nw.lat && lat > locationData[i].se.lat && lon > locationData[i].nw.lon && lon < locationData[i].se.lon){
					displayText = "<p>" + locationData[i].label + ": <br>" + coords + "</p>";
				}
			}

			if (displayText) {
				display.text(displayText);
			}
			else{
				display.html("<p>No info for this location.<br> " + coords + "</p>");
			}
		}

		function showError(error) {
		    switch(error.code) {
		        case error.PERMISSION_DENIED:
		            display.html("<p>User denied the request for Geolocation.</p>");
		            break;
		        case error.POSITION_UNAVAILABLE:
		            display.html("<p>Location information is unavailable.</p>");
		            break;
		        case error.TIMEOUT:
		            display.html("<p>The request to get user location timed out.</p>");
		            break;
		        case error.UNKNOWN_ERROR:
		            display.html("<p>An unknown error occurred.</p>");
		            break;
		    }
		}
	</script>
</body>
</html>